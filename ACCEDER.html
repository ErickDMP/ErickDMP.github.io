<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ACCEDER.css">
    <title>Acceder</title>
</head>
<body>
          <ol>
            
            
            <li><a href="index.html">Inicio</a></li>
            <li><a href="urgencias.html">Urgencias</a></li>
            <li><a href="ACCEDER.html">Acceder</a></li>
            <li><a href="dormir_con_ansiedad.html">Dormir con ansiedad</a></li>
            <li><a href="trabajar_con_ansiedad.html">Trabajar con ansiedad</a></li>
            <li><a href="interes.html">Paginas de interes</a></li>
        
          </ol>
    <body>
  <h1>Registro</h1>
  <p> Para el registro recuerda que si eres compaÃ±ero de clase o profesor no debes registrarte ve a iniciar sesiÃ³n y sigue las instrucciones</p>
  <p>Registro "NO REQUIERE UN CORREO REAL" el correo de registro se guarda como un nuevo usuario en una base de datos de supabase y la contraseÃ±a tambien pero cifrada</p>
  
  <p> ContraeÃ±a requiere al menos 6 caracteres</p>
  <form id="signup-form">
    <input id="signup-email" type="email" placeholder="Escribe tu correo para registro" required />
    <input id="signup-password" type="password" placeholder="Escribe tu contraseÃ±a" required />
    <button type="submit">Registrarse</button>
  </form>

  <h1>Iniciar sesiÃ³n</h1>
  <p>Si eres un compaÃ±ero de clase o profesor debe iniciar secciÃ³n con tu nombre + @gmail.com y la clave son numeros del 1 al 6 (132456)</p>
  <p>Ejemplo usuario: profesor@gmail.com clave:12345</p>
  <p>La confirmaciÃ³n de email esta desactiva por si se registra alguien</p>
  <form id="signin-form">
    <input id="signin-email" type="email" placeholder="Correo de usuario" required />
    <input id="signin-password" type="password" placeholder="ContraseÃ±a de usuario" required />
    <button type="submit">Entrar</button>
  </form>

  <button id="signout-btn">Cerrar sesiÃ³n</button>

    <script type="module">
    import { supabase } from './supabaseziha.js'

    // Registro
    document.getElementById('signup-form').addEventListener('submit', async (e) => {
      e.preventDefault()
      const email = document.getElementById('signup-email').value
      const password = document.getElementById('signup-password').value

      const { data, error } = await supabase.auth.signUp({ email, password })
      if (error) {
        alert('Error al registrarse: ' + error.message)
      } else {
        alert('Registro exitoso ğŸ‰')
        console.log(data)
      }
    })

  // Login
document.getElementById('signin-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  const email = document.getElementById('signin-email').value;
  const password = document.getElementById('signin-password').value;

  const { data, error } = await supabase.auth.signInWithPassword({ email, password });

  if (error) {
    alert('âŒ Error al iniciar sesiÃ³n: ' + error.message);
  } else {
    alert('âœ… Inicio de sesiÃ³n correcto');
    // Guardamos el usuario en localStorage para usarlo en perfil.html
    localStorage.setItem('user', JSON.stringify(data.user));
    // Redirige a la pÃ¡gina de perfil
    window.location.href = 'menu_perfil.html';
  }
});


    // Logout
    document.getElementById('signout-btn').addEventListener('click', async () => {
      await supabase.auth.signOut()
      alert('SesiÃ³n cerrada ğŸ‘‹')
    })
  </script>
  <p> <a href="https://supabase.com/">Supabase web gratuita para crear proyectos pequeÃ±os</a></p>
  <a href="https://supabase.com/"><img src="supabase.png"></a>

    <footer>
  <p> Â© 2026 Â¿QuÃ© es la ansiedad? Por Erick Daniel Morales Paredes - Todos los derechos reservados Fecha 10 de febrero del 2026</p>
</footer>
    </body>

</html>
